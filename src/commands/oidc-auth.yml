description: >
  Copies a local file or S3 object to another location locally or in S3. https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html

parameters:
  aws-region:
    type: env_var_name
    description: aws region override
    default: AWS_REGION
  profile-name:
    description: AWS profile name to be configured.
    type: string
    default: ''
  role-arn:
    description: |
      The Amazon Resource Name (ARN) of the role that the caller is assuming.
      Role ARN must be configured for web identity.
    type: string
    default: ""
  role-session-name:
    description: An identifier for the assumed role session. Environment varaibles will be evaluated.
    type: string
    default: ${CIRCLE_JOB}
  session-duration:
    description: The duration of the session in seconds
    type: string
    default: "3600"
steps:
  - aws-cli/setup:
      role-arn: <<parameters.role-arn>>
      profile-name: <<parameters.profile-name>>
      session-duration: <<parameters.session-duration>>
      aws-region: <<parameters.aws-region>>
      role-session-name: <<parameters.role-session-name>>
